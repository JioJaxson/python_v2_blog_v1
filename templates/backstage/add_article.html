{% extends 'backstage/backstage.html' %}

{% block css %}
    <link rel="stylesheet" href="/static/editor-md/css/editormd.css"/>

    <link rel="stylesheet" href="/static/my/css/backstage/add_article.css">

{% endblock %}

{#重写main#}
{% block main %}
    <div class="add_article_actions">
        <el-button @click="add_drawer=true" type="primary">完善文章信息</el-button>
    </div>
    <div id="editor">
        <textarea style="display:none;"></textarea>
    </div>
    <el-drawer
            title="添加文章"
            :visible.sync="add_drawer"
            direction="rtl"
            :before-close="add_handleClose">
        <div class="add_el_drawer_content">
            <el-collapse v-model="add_article_activeNames">
                <el-collapse-item title="文章标题" name="1">
                    <el-input v-model="add_title" placeholder="请输入文章标题"/>
                </el-collapse-item>
                <el-collapse-item class="category_tags" title="文章分类与标签" name="2">
                    <el-select class="category" v-model="category_id" placeholder="请选择文章分类">
                        <el-option
                                v-for="item in category_options"
                                :key="item.value"
                                :label="item.label"
                                :value="item.value">
                        </el-option>
                    </el-select>
                    <el-select
                            class="tags"
                            v-model="tags"
                            multiple
                            collapse-tags
                            placeholder="请选择文章标签">
                        <el-option
                                v-for="item in tag_options"
                                :key="item.value"
                                :label="item.label"
                                :value="item.value">
                        </el-option>
                    </el-select>
                </el-collapse-item>
                <el-collapse-item class="article_cover" title="文章封面" name="3">
                    <div class="left">
                        <img src="/media/article_img/28.jpg">
                    </div>
                    <div class="right">
                        <el-select v-model="cover_id" placeholder="请选择文章封面">
                            <el-option
                                    label="/media/article_img/28.jpg"
                                    value="1">
                            </el-option>
                            <el-option
                                    label="/media/article_img/28.jpg"
                                    value="2">
                            </el-option>

                        </el-select>
                    </div>
                </el-collapse-item>
                <el-collapse-item class="selectable_article" title="文章可选设置" name="4">
                    <el-switch
                            v-model="recommend"
                            active-color="#13ce66"
                            inactive-color="#ff4949"
                            active-text="上推荐"
                            inactive-text="不上推荐">
                    </el-switch>

                    <el-switch
                            v-model="pwdactive"
                            active-text="加密"
                            inactive-text="不加密">
                    </el-switch>
                    <el-input v-if="pwdactive" v-model="pwd" placeholder="请输入文章加密密码"></el-input>
                </el-collapse-item>
            </el-collapse>

            <div class="submit_article_btn">
                <el-button type="success">发布文章</el-button>
            </div>
        </div>
    </el-drawer>

{% endblock %}


{% block js %}
    <script src="/static/editor-md/lib/marked.min.js"></script>
    <script src="/static/editor-md/lib/prettify.min.js"></script>
    <script src="/static/jquery/jquery.min.js"></script>
    <script src="/static/editor-md/editormd.min.js"></script>
    <script>
        $(function () {
            editormd('editor', {
                width: '100%',
                height: '600',
                path: '/static/editor-md/lib/'
            });
        });
    </script>
{% endblock %}